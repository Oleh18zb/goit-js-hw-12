{"version":3,"file":"gallery.js","sources":["../src/js/UnsplashAPI.js","../src/gallery.js"],"sourcesContent":["import axios from \"axios\";\n\nexport class UnsplashAPI{\n    #BASE_URL = 'https://api.unsplash.com/search/photos'\n    #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58'\n    #query = ''\n\nasync getPopularPhotos(page){\n    const url = `${this.#BASE_URL}?query=popular&page=${page}&per_page=12&orientation=portrait&client_id=${this.#API_KEY}`;\n\ntry {\n    const response = await axios(url);\n    return response.data;\n} catch (error) {\n    console.log(error);\n}}\nasync getPhotosByQuery(page){\n    const url = `${this.#BASE_URL}?query=${this.#query}&page=${page}&per_page=12&orientation=portrait&client_id=${this.#API_KEY}`;\n\ntry {\n    const response = await axios(url);\n    return response.data;\n} catch (error) {\n    console.log(error);\n}}\nset query(newQuery) {this.#query = newQuery}}\n","\n\nimport Pagination from 'tui-pagination'; /* ES6 */\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport { createGallery } from \"./js/render-functions\";\nimport { UnsplashAPI } from \"./js/UnsplashAPI\";\nimport iziToast from 'izitoast';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nconst gallery = document.querySelector('.js-gallery');\nconst container = document.getElementById('tui-pagination-container');\nconst form = document.querySelector('.js-search-form');\nconst newLoader = document.querySelector('.new_loader');\n\n\n\nconst options = { // below default value of options\n    totalItems: 0,\n    itemsPerPage: 12,\n    visiblePages: 5,\n    page: 1,}\nconst pagination = new Pagination(container, options);\n\nconst page = pagination.getCurrentPage();\n\nconst service = new UnsplashAPI();\nshowElement(newLoader);\nservice.getPopularPhotos(page).then(data => {console.log(data)\n    const markup = createGallery(data.results)\n    pagination.reset(data.total);\ngallery.innerHTML = markup;\n}\n)\n.catch ((error) => {\n    console.log(error);\n    iziToast.error({message: 'Error'})\n   }) \n.finally (() => {\n    hideElement(newLoader);\n});\n\npagination.on('afterMove', popular);\n\n    function popular(event) {\n        showElement(newLoader);\n            const currentPage = event.page;\n            console.log(currentPage);\n            service.getPopularPhotos(currentPage).then(data => {console.log(data)\n                const markup = createGallery(data.results)\n                // pagination.reset(data.total);\n            gallery.innerHTML = markup;\n        })\n           .catch ((error) => {\n            console.log(error);\n            iziToast.error({message: 'Error'})\n           }) \n        .finally (() => {\n            hideElement(newLoader);\n        })}\n\n    form.addEventListener('submit', search);\n\n    async function search(event) {\n        event.preventDefault();\n        const searchValue = event.target.elements.query.value.trim();\n        if (!searchValue) {\n            iziToast.info({message: \"Enter something to search!\"})\n            return\n        }\n        pagination.off('afterMove', popular);\n        pagination.off('afterMove', byQuery);\n        service.query = searchValue;\n        showElement(newLoader);\n        try {\n            const data = await service.getPhotosByQuery(page);\n            if (data.results.length === 0) {\n                iziToast.warning({message: 'Not found'})\n                hideElement(container);\n                return\n            }\n            if (data.results.length < 12) {\n                hideElement(container);\n            } else {\n                showElement(container);\n            }\n            const markup = createGallery(data.results);\n            gallery.innerHTML = markup;\n            pagination.reset(data.total);\n        } catch (error) {\n            console.log(error);\n            iziToast.error({message: 'Error'})\n        }\n        finally {\n            hideElement(newLoader);\n            form.reset();\n        }\n        pagination.on('afterMove', byQuery);\n    }\n\n    function byQuery(event) {\n        showElement(newLoader);\n        const currentPage = event.page;\n            console.log(currentPage);\n            service.getPhotosByQuery(currentPage).then(data => {console.log(data)\n                const markup = createGallery(data.results)\n                // pagination.reset(data.total);\n            gallery.innerHTML = markup;\n        })\n        .catch ((error) => {\n            console.log(error);\n            iziToast.error({message: 'Error'})\n           }) \n        .finally (() => {\n            hideElement(newLoader);\n        })}\n\n        gallery.addEventListener('click', (event) => {\n            event.preventDefault();\n            if (event.target.nodeName !== 'IMG') {\n                return\n            }\n            const instance = basicLightbox.create(`\n                <img src=\"${event.target.dataset.source}\" alt=\"${event.target.alt}\">\n            `)\n            instance.show();\n        })\n\n    function showElement(element) {\n        element.classList.remove('is_hidden');\n    }\n\n    function hideElement(element) {\n        element.classList.add('is_hidden');\n    }\n\n    // 1. Створи застосунок для пошуку погоди в своєму місті\n// Використовуй API https://openweathermap.org/api\n// (Current Weather Data -> Built-in API request by city name)\n// створи файл api.js що робитиме запит на бек\n// створи файл create-markup.js для створення розмітки (https://prnt.sc/LEataI862RLd)\n// додай пошук погоди в конкретному місті використовуючи форму\n// 2. Додай в картку з погодою кнопку Save для зберігання\n// інформації про погоду в місті в localStorage, щоб при оновленні сторінки\n// йшов запит за погодою в збереженому місті\n// коли місто збережено, кнопка стає Delete і можна видалити місто, тоді запит\n// не буде йти при оновленні сторінки"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","axios","error","newQuery","__privateSet","gallery","container","form","newLoader","options","pagination","Pagination","service","showElement","data","markup","createGallery","iziToast","hideElement","popular","event","currentPage","search","searchValue","byQuery","basicLightbox.create","element"],"mappings":"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"}