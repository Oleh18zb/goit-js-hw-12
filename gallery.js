var P=e=>{throw TypeError(e)};var E=(e,o,t)=>o.has(e)||P("Cannot "+t);var a=(e,o,t)=>(E(e,o,"read from private field"),t?t.call(e):o.get(e)),y=(e,o,t)=>o.has(e)?P("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(e):o.set(e,t),L=(e,o,t,r)=>(E(e,o,"write to private field"),r?r.call(e,t):o.set(e,t),t);import{c as d}from"./assets/render-functions-5e74lLoP.js";import{a as _,P as $,i as c,b}from"./assets/vendor-Draw1i9A.js";var g,p,h;class B{constructor(){y(this,g,"https://api.unsplash.com/search/photos");y(this,p,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");y(this,h,"")}async getPopularPhotos(o){const t=`${a(this,g)}?query=popular&page=${o}&per_page=12&orientation=portrait&client_id=${a(this,p)}`;try{return(await _(t)).data}catch(r){console.log(r)}}async getPhotosByQuery(o){const t=`${a(this,g)}?query=${a(this,h)}&page=${o}&per_page=12&orientation=portrait&client_id=${a(this,p)}`;try{return(await _(t)).data}catch(r){console.log(r)}}set query(o){L(this,h,o)}}g=new WeakMap,p=new WeakMap,h=new WeakMap;const m=document.querySelector(".js-gallery"),f=document.getElementById("tui-pagination-container"),w=document.querySelector(".js-search-form"),s=document.querySelector(".new_loader"),S={totalItems:0,itemsPerPage:12,visiblePages:5,page:1},n=new $(f,S),M=n.getCurrentPage(),i=new B;u(s);i.getPopularPhotos(M).then(e=>{console.log(e);const o=d(e.results);n.reset(e.total),m.innerHTML=o}).catch(e=>{console.log(e),c.error({message:"Error"})}).finally(()=>{l(s)});n.on("afterMove",q);function q(e){u(s);const o=e.page;console.log(o),i.getPopularPhotos(o).then(t=>{console.log(t);const r=d(t.results);m.innerHTML=r}).catch(t=>{console.log(t),c.error({message:"Error"})}).finally(()=>{l(s)})}w.addEventListener("submit",k);async function k(e){e.preventDefault();const o=e.target.elements.query.value.trim();if(!o){c.info({message:"Enter something to search!"});return}n.off("afterMove",q),n.off("afterMove",v),i.query=o,u(s);try{const t=await i.getPhotosByQuery(M);if(t.results.length===0){c.warning({message:"Not found"}),l(f);return}t.results.length<12?l(f):u(f);const r=d(t.results);m.innerHTML=r,n.reset(t.total)}catch(t){console.log(t),c.error({message:"Error"})}finally{l(s),w.reset()}n.on("afterMove",v)}function v(e){u(s);const o=e.page;console.log(o),i.getPhotosByQuery(o).then(t=>{console.log(t);const r=d(t.results);m.innerHTML=r}).catch(t=>{console.log(t),c.error({message:"Error"})}).finally(()=>{l(s)})}m.addEventListener("click",e=>{if(e.preventDefault(),e.target.nodeName!=="IMG")return;b.create(`
                <img src="${e.target.dataset.source}" alt="${e.target.alt}">
            `).show()});function u(e){e.classList.remove("is_hidden")}function l(e){e.classList.add("is_hidden")}
//# sourceMappingURL=gallery.js.map
